<section class="cr-packages">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="cr-packages__heading">{{ section.settings.heading | escape }}</h2>
    {% endif %}

    <div class="cr-packages__grid">
      {% for block in section.blocks %}
        <div class="cr-package" {{ block.shopify_attributes }}>
          {% if block.settings.image != blank %}
            <div class="cr-package__img">
              {{ block.settings.image | image_url: width: 1200 | image_tag: loading: 'lazy' }}
            </div>
          {% endif %}

          <div class="cr-package__body">
            {% if block.settings.title != blank %}
              <h3 class="cr-package__title">{{ block.settings.title | escape }}</h3>
            {% endif %}
            {% if block.settings.desc != blank %}
              <p class="cr-package__desc">{{ block.settings.desc | escape }}</p>
            {% endif %}

            {% if block.settings.cta_text != blank %}
              <a class="cr-package__cta"
                 href="{{ block.settings.cta_link | default: '/pages/custom-rigging' }}">
                {{ block.settings.cta_text | escape }}
              </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    {% if section.settings.custom_title != blank %}
      <div class="cr-packages__custom">
        <h3>{{ section.settings.custom_title | escape }}</h3>
        <p>{{ section.settings.custom_text | escape }}</p>
        {% if section.settings.custom_link_label != blank %}
          <a class="cr-packages__customlink"
             href="{{ section.settings.custom_link | default: 'tel:252-499-9911' }}">
            {{ section.settings.custom_link_label | escape }}
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</section>

<style>
  .cr-packages { padding: 56px 0; }
  .cr-packages__heading { margin: 0 0 22px; text-align: center; }
  .cr-packages__grid { display: grid; gap: 18px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
  .cr-package { border-radius: 14px; overflow: hidden; border: 1px solid rgba(0,0,0,.08); background: #fff; }
  .cr-package__img img { width: 100%; height: 220px; object-fit: cover; display:block; }
  .cr-package__body { padding: 16px; }
  .cr-package__title { margin: 0 0 6px; }
  .cr-package__desc { margin: 0 0 12px; opacity: .85; }
  .cr-package__cta { display:inline-block; padding: 10px 14px; border-radius: 10px; background:#0aa86b; color:#fff; text-decoration:none; font-weight:700; }
  .cr-packages__custom { margin-top: 26px; text-align:center; padding: 18px; border-radius: 14px; background: rgba(10,168,107,.08); }
  .cr-packages__customlink { font-weight: 800; text-decoration:none; }
</style>

{% schema %}
{
  "name": "Rigging Packages",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Rigging Packages" },

    { "type": "text", "id": "custom_title", "label": "Custom title", "default": "Want something custom?" },
    { "type": "text", "id": "custom_text", "label": "Custom text", "default": "We can build a rig around your fishing style and budget." },
    { "type": "text", "id": "custom_link_label", "label": "Custom link label", "default": "Call us to spec it out" },
    { "type": "text", "id": "custom_link", "label": "Custom link (any URL)", "default": "tel:252-499-9911" }
  ],
  "blocks": [
    {
      "type": "package",
      "name": "Package",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Title", "default": "Tournament Ready" },
        { "type": "text", "id": "desc", "label": "Description", "default": "Electronics, power, storage, and install." },
        { "type": "text", "id": "cta_text", "label": "CTA text", "default": "Learn more" },
        { "type": "text", "id": "cta_link", "label": "Learn more link (any URL)", "default": "/pages/custom-rigging" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Rigging Packages",
      "blocks": [
        { "type": "package" },
        { "type": "package" },
        { "type": "package" }
      ]
    }
  ]
}
{% endschema %}
